

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="ca" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="ca" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Hola Pytest &mdash; Introducció a la programació 2019-20 documentació</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script type="text/javascript" src="_static/translations.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/moistyle.css" type="text/css" />
    <link rel="author" title="Quant a aquests documents" href="about.html" />
    <link rel="index" title="Índex" href="genindex.html" />
    <link rel="search" title="Cerca" href="search.html" />
     
    <script src="_static/moiscripts.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Introducció a la programació
          

          
            
            <img src="_static/logoprg.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                1920
              </div>
            
          

          

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="primeres_passes.html">Primeres passes</a></li>
<li class="toctree-l1"><a class="reference internal" href="instruccions.html">Instruccions</a></li>
<li class="toctree-l1"><a class="reference internal" href="condicionals.html">Condicionals</a></li>
<li class="toctree-l1"><a class="reference internal" href="iteracions.html">Iteracions</a></li>
<li class="toctree-l1"><a class="reference internal" href="programacio_modular.html">Programació Modular</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Introducció a la programació</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Hola Pytest</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
    <div>
    <div id="cookiesbox">
        Aquest lloc web utilitza galetes (<i>cookies</i>) per a analitzar el seu ús
        amb les eines que ofereix <a href="https://www.google.com/analytics">Google Analytics</a>.
        En continuar navegant-hi, estàs acceptant-ho.
        <br/>
        <a class="btn btn-neutral" onclick="setUserAcceptsCookies();">
            Tancar
            <span class="fa fa-window-close"></span>
        </a>
    </div>

    <script>setCookiesboxVisibility();</script>

</div>
    
           <div itemprop="articleBody">
            
  <div class="section" id="hola-pytest">
<h1>Hola Pytest<a class="headerlink" href="#hola-pytest" title="Link permanent a aquest títol">¶</a></h1>
<p>Obre un fitxer anomenat <code class="docutils literal notranslate"><span class="pre">test_holapytest.py</span></code> i copia-hi el següent codi:</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot; Aquest és el meu primer test en pytest &quot;&quot;&quot;</span>

<span class="k">def</span> <span class="nf">test_hola_mon</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot; si em poses un bon nom, no cal afegir un comentari &quot;&quot;&quot;</span>
    <span class="k">assert</span> <span class="bp">False</span>
</pre></div>
</td></tr></table></div>
<p>Com pots veure, el codi no pot ser gaire més senzill. Inclou el típic
comentari de capçalera de tots els fitxers que et fa no perdre punts ni en
aquesta assignatura ni com a professional del desenvolupament, i una
funció sense paràmetres i amb una única línia al cos que diu, traduïnt-la
al català: <em>afirmo que fals és cert</em>.</p>
<p>Evidentment, fals no pot ser cert, així que estem afirmant quelcom fals.
Envolicat? Potser. Veiem què passa en executar-</p>
<div class="highlight-none notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="highlight"><pre><span></span>$ python3 -m pytest test_holapytest.py
============================= test session starts ==============================
platform linux -- Python 3.8.0, pytest-5.2.2, py-1.8.0, pluggy-0.13.0
rootdir: /tmp/unaprova
collected 1 item

test_holapytest.py F                                                [100%]

=================================== FAILURES ===================================
________________________________ test_hola_mon _________________________________

    def test_hola_mon():
        &quot;&quot;&quot; si em poses un bon nom, no cal afegir un comentari &quot;&quot;&quot;
&gt;       assert False
E       assert False

test_holapytest.py:6: AssertionError
============================== 1 failed in 0.02s ===============================
</pre></div>
</td></tr></table></div>
<p>Què ens està dient? Doncs bàsicament que el nostre test no passa la
prova. És clar, no podem afirmar que és cert quelcom que és tan
evidentment fals com <code class="docutils literal notranslate"><span class="pre">False</span></code> oi?</p>
<div class="section" id="execucio-mes-comoda">
<h2>Execució més còmoda<a class="headerlink" href="#execucio-mes-comoda" title="Link permanent a aquest títol">¶</a></h2>
<p>El mòdul <em>pytest</em> és realment còmode de fer servir. Ens ofereix el
programa <code class="docutils literal notranslate"><span class="pre">pytest</span></code> que executat directament en una carpeta, sense que li
hàgim de dir res, cercarà tots els fitxers que tinguin pinta de ser
fitxers de test i mirarà d’executar totes les funcions que tinguin pinta
de ser funcions de test. Per nosaltres, de moment, això de <em>tenir pinta</em>
ho farà simplement anomenant els fitxers i les funcions de prova amb el
prefix <code class="docutils literal notranslate"><span class="pre">test_</span></code>.</p>
<p>Així, des de la carpeta anterior, podem fer simplement <code class="docutils literal notranslate"><span class="pre">pytest</span></code> sense
cap paràmetre, i ens generarà la mateixa sortida.</p>
</div>
<div class="section" id="un-missatge-mes-informatiu">
<h2>Un missatge més informatiu<a class="headerlink" href="#un-missatge-mes-informatiu" title="Link permanent a aquest títol">¶</a></h2>
<p>De vegades, ens pot interessar descriure el nostre objectiu amb
l’afirmació, de manera que sigui més fàcil d’interpretar el missatge
d’error.</p>
<p>Considera la nova versió del nostre programa:</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot; Aquest és el meu primer test en pytest &quot;&quot;&quot;</span>

<span class="k">def</span> <span class="nf">test_hola_mon</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot; si em poses un bon nom, no cal afegir un comentari &quot;&quot;&quot;</span>
    <span class="k">assert</span> <span class="bp">False</span><span class="p">,</span> <span class="s2">&quot;No t&#39;espantis. És una prova per veure una fallada a pytest&quot;</span>
</pre></div>
</td></tr></table></div>
<p>En executar-ho, ens trobem amb la següent sortida:</p>
<div class="highlight-none notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19</pre></div></td><td class="code"><div class="highlight"><pre><span></span>    $ pytest
    ============================= test session starts ==============================
    platform linux -- Python 3.8.0, pytest-5.2.2, py-1.8.0, pluggy-0.13.0
    rootdir: /tmp/unaprova
    collected 1 item

    test_holapytest.py F                                                     [100%]

    =================================== FAILURES ===================================
    ________________________________ test_hola_mon _________________________________

        def test_hola_mon():
            &quot;&quot;&quot; si em poses un bon nom, no cal afegir un comentari &quot;&quot;&quot;
    &gt;       assert False, &quot;No t&#39;espantis. És una prova per veure una fallada a pytest&quot;
    E       AssertionError: No t&#39;espantis. És una prova per veure una fallada a pytest
    E       assert False

    test_holapytest.py:5: AssertionError
    ============================== 1 failed in 0.03s ===============================
</pre></div>
</td></tr></table></div>
<p>Com pots veure, el missatge resultant dóna una pista més clara de quin és
el problema.</p>
</div>
<div class="section" id="arreglem-el-problema">
<h2>Arreglem el problema<a class="headerlink" href="#arreglem-el-problema" title="Link permanent a aquest títol">¶</a></h2>
<p>Fem que passi la prova</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot; Aquest és el meu primer test en pytest &quot;&quot;&quot;</span>

<span class="k">def</span> <span class="nf">test_hola_mon</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot; si em poses un bon nom, no cal afegir un comentari &quot;&quot;&quot;</span>
    <span class="k">assert</span> <span class="bp">True</span>
</pre></div>
</td></tr></table></div>
<p>Executem:</p>
<div class="highlight-none notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span></span>$ pytest
============================= test session starts ==============================
platform linux -- Python 3.8.0, pytest-5.2.2, py-1.8.0, pluggy-0.13.0
rootdir: /tmp/unaprova
collected 1 item

test_holapytest.py .                                                [100%]

============================== 1 passed in 0.01s ===============================
</pre></div>
</td></tr></table></div>
<p>Fantàstic! Prova superada.</p>
</div>
<div class="section" id="una-prova-mes-interessant">
<h2>Una prova més interessant<a class="headerlink" href="#una-prova-mes-interessant" title="Link permanent a aquest títol">¶</a></h2>
<p>Afegim una nova funció de prova:</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot; Aquest és el meu primer test en pytest &quot;&quot;&quot;</span>

<span class="k">def</span> <span class="nf">test_hola_mon</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot; si em poses un bon nom, no cal afegir un comentari &quot;&quot;&quot;</span>
    <span class="k">assert</span> <span class="bp">True</span>

<span class="k">def</span> <span class="nf">test_compara_text</span><span class="p">():</span>
    <span class="k">assert</span> <span class="s2">&quot;el meu nom és molt maco&quot;</span> <span class="o">==</span> <span class="s2">&quot;el meu món és molt maco&quot;</span>
</pre></div>
</td></tr></table></div>
<p>En executar-la, ens genera el següent missatge:</p>
<div class="highlight-none notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21</pre></div></td><td class="code"><div class="highlight"><pre><span></span>$ pytest
============================= test session starts ==============================
platform linux -- Python 3.8.0, pytest-5.2.2, py-1.8.0, pluggy-0.13.0
rootdir: /tmp/unaprova
collected 2 items

test_holapytest.py .F                                               [100%]

=================================== FAILURES ===================================
______________________________ test_compara_text _______________________________

    def test_compara_text():
&gt;       assert &quot;el meu nom és molt maco&quot; == &quot;el meu món és molt maco&quot;
E       AssertionError: assert &#39;el meu nom és molt maco&#39; == &#39;el meu món és molt maco&#39;
E         - el meu nom és molt maco
E         ?         --
E         + el meu món és molt maco
E         ?        ++

test_holapytest.py:8: AssertionError
========================= 1 failed, 1 passed in 0.04s ==========================
</pre></div>
</td></tr></table></div>
<p>Novament ens ha fallat.</p>
<p>Aquesta vegada, però, observem coses diferents.
En primer lloc, veiem que ha realitzat dues proves. Una ha passat i
l’altra no.</p>
<p>La que no ha passat, no s’ha quedat amb dir-nos que els dos texts no són
iguals. Fixa’t. Ens està indicant gràficament on és la diferència!</p>
</div>
</div>


           </div>
           
          </div>

  <!-- Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-41103782-2', 'auto');
  ga('send', 'pageview');

</script>
  <!-- End Google Analytics -->


          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019-2020 Moisès Gómez Girón

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>