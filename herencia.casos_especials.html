

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="ca" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="ca" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Casos especials &mdash; Introducció a la programació 1819 documentació</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/moistyle.css" type="text/css" />
    <link rel="author" title="Quant a aquests documents" href="about.html" />
    <link rel="index" title="Índex" href="genindex.html" />
    <link rel="search" title="Cerca" href="search.html" />
    <link rel="prev" title="Ocultació i redefinició" href="herencia.ocultacio_redefinicio.html" />
     
    <script src="_static/moiscripts.js"></script>


  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Introducció a la programació
          

          
            
            <img src="_static/logoprg.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                1819
              </div>
            
          

          

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="primeres_passes.html">Primeres passes</a></li>
<li class="toctree-l1"><a class="reference internal" href="dades.html">Dades</a></li>
<li class="toctree-l1"><a class="reference internal" href="operadors_i_expressions.html">Operadors i expressions</a></li>
<li class="toctree-l1"><a class="reference internal" href="instruccions.html">Instruccions seqüencials</a></li>
<li class="toctree-l1"><a class="reference internal" href="condicionals.html">Condicionals</a></li>
<li class="toctree-l1"><a class="reference internal" href="iteracions.html">Iteracions</a></li>
<li class="toctree-l1"><a class="reference internal" href="strings.html">Strings</a></li>
<li class="toctree-l1"><a class="reference internal" href="programacio_modular.html">Programació Modular</a></li>
<li class="toctree-l1"><a class="reference internal" href="bucles_condicionals.html">Bucles condicionals</a></li>
<li class="toctree-l1"><a class="reference internal" href="sequencies.html">Seqüències</a></li>
<li class="toctree-l1"><a class="reference internal" href="python2java.html">De Python a Java</a></li>
<li class="toctree-l1"><a class="reference internal" href="fitxers.html">Fitxers</a></li>
<li class="toctree-l1"><a class="reference internal" href="estructures.html">Estructures</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="poo.html">Programació Orientada a Objectes</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="classes_i_objectes.html">Classes i objectes</a></li>
<li class="toctree-l2"><a class="reference internal" href="constructors_i.html">Constructors</a></li>
<li class="toctree-l2"><a class="reference internal" href="membres_instancia_classe.html">Membres d’instància i de classe</a></li>
<li class="toctree-l2"><a class="reference internal" href="relacions.html">Relacions entre classes</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="herencia.html">Herència</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="herencia.intro.html">Introducció al concepte d’herència</a></li>
<li class="toctree-l3"><a class="reference internal" href="herencia.java.html">L’herència a Java</a></li>
<li class="toctree-l3"><a class="reference internal" href="herencia.visualitzacio.html">Una visualització del concepte d’extensió</a></li>
<li class="toctree-l3"><a class="reference internal" href="herencia.especifics.html">Comportaments específics</a></li>
<li class="toctree-l3"><a class="reference internal" href="herencia.ocultacio_redefinicio.html">Ocultació i redefinició</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Casos especials</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Introducció a la programació</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="poo.html">Programació Orientada a Objectes</a> &raquo;</li>
        
          <li><a href="herencia.html">Herència</a> &raquo;</li>
        
      <li>Casos especials</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
    <div>
    <div id="cookiesbox">
        Aquest lloc web utilitza galetes (<i>cookies</i>) per a analitzar el seu ús
        amb les eines que ofereix <a href="https://www.google.com/analytics">Google Analytics</a>.
        En continuar navegant-hi, estàs acceptant-ho.
        <br/>
        <a class="btn btn-neutral" onclick="setUserAcceptsCookies();">
            Tancar
            <span class="fa fa-window-close"></span>
        </a>
    </div>

    <script>setCookiesboxVisibility();</script>

</div>
    
           <div itemprop="articleBody">
            
  <div class="section" id="casos-especials">
<h1>Casos especials<a class="headerlink" href="#casos-especials" title="Link permanent a aquest títol">¶</a></h1>
<p>Considerem ara un parell de casos especials sobre l’herència: l’herència no permesa i l’herència no
desitjada.</p>
<p>Es tracta d’un parell de casos més avançadets i que probablement es poden saltar a una introducció
a la orientació a objectes. En tot cas, et pot servir de reflexió fer-li una ullada.</p>
<div class="section" id="l-herencia-no-permesa">
<h2>L’herència no permesa<a class="headerlink" href="#l-herencia-no-permesa" title="Link permanent a aquest títol">¶</a></h2>
<p>De vegades ens pot interessar que una classe no permeti tenir
subclasses. Això pot passar, per exemple, quan la nostra classe és
immutable (el valor de les seves propietats es manté des de
l’assignació). No voldrem que una subclasse pugui permetre perdre
aquesta condició d’immutabilitat.</p>
<p>Això, que pot semblar una mica estrany si no coneixem el concepte de <em>polimorfisme</em><a class="footnote-reference" href="#polimorfisme" id="id1">[1]</a>, és quelcom que
ha preocupat suficientment als desenvolupadors de classes com String, com per voler trobar una
manera d’evitar-ho.</p>
<p>Evitar que una classe pugui tenir subclasses és molt simple: declares la classe <em>final</em></p>
<div class="highlight-java notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kd">final</span> <span class="kd">class</span> <span class="nc">A</span> <span class="o">{</span> <span class="cm">/* ... */</span> <span class="o">}</span>
<span class="kd">class</span> <span class="nc">B</span> <span class="kd">extends</span> <span class="n">A</span> <span class="o">{</span> <span class="cm">/* ... */</span> <span class="o">}</span> <span class="c1">// error de compilació</span>
</pre></div>
</td></tr></table></div>
<p>Per cert, també pots fer que no es pugui redefinir un mètode de la mateixa manera: fent-lo <em>final</em>.
Això pot repercutir en una certa millora d’eficiència en alguns casos (generalment també relacionats
amb el polimorfisme)</p>
<div class="section" id="l-herencia-no-desitjada">
<h3>L’herència no desitjada<a class="headerlink" href="#l-herencia-no-desitjada" title="Link permanent a aquest títol">¶</a></h3>
<p><strong>Nota</strong>: aquesta secció és opcional en una primera visita a la POO.
És perfectament raonable que te la saltis.</p>
<p>De vegades pot passar que heretem coses que no volem.</p>
<p>Considera per exemple el cas de l’ornitorinc. Es tracta d’un mamífer.
Sí, té un aspecte una mica… peculiar com es pot començar a apreciar
a la foto<a class="footnote-reference" href="#ornitorinc" id="id2">[2]</a>. Aquest animaló d’Australia fa servir ous per
reproduir-se, és verinós, té bec d’ànec, cua de castor i potes de
llúdria. Ah!  l’alletament de les cries es realitza a través de porus
a la pell en comptes de fer servir mamelles, no fos que semblés normal
en alguna cosa… Amb tot, no és una mena de <em>pokemon</em> sinó què és
real i…  és un mamífer!.</p>
<div class="figure align-center">
<img alt="L'ornitorinc" src="_images/poo011.img003.ornitorinc.png" />
</div>
<p>És clar, si tens una classe Mamífer ben construïda per la <strong>immensa</strong>
majoria dels mamífers, probablement l’ornitorinc la posarà molt a
prova!</p>
<p>Tornem a la POO. Què fem quan heretem un membre que no ens interessa
oferir? Si hem de ser puristes, ens hauríem de replantejar tota la
jerarquia de classes. Com que això no sempre és possible, des de Java
ens queden poques opcions.</p>
<p>Si el membre heretat era una propietat pública, la podem ocultar
creant una nova propietat a la subclasse amb el mateix nom i
visibilitat privada. Ara tindrem dues còpies de la propietat però al
menys no serà accessible, i si accedim a la instància considerant-la
de la superclasse  encara hi accedirem a la propietat
heretada!</p>
<p>Si és un mètode públic, no podem fer el mateix que amb una propietat,
perquè l’estem redefinint amb una visibilitat més restrictiva i el
compilador ens retornarà l’error <code class="docutils literal notranslate"><span class="pre">attempting</span> <span class="pre">to</span> <span class="pre">assign</span> <span class="pre">weaker</span> <span class="pre">access</span>
<span class="pre">privileges;</span> <span class="pre">was</span> <span class="pre">public</span></code></p>
<p>El que farem serà:</p>
<ol class="arabic simple">
<li>documentar a la nostra classe que el membre heretat no es suporta.</li>
<li>ocultar el membre heretat amb una versió pròpia</li>
<li>fer que el cos del mètode redefinit llenci l’excepció
<code class="docutils literal notranslate"><span class="pre">UnsuportedOperationException</span></code>.<a class="footnote-reference" href="#excepcions" id="id3">[3]</a></li>
</ol>
<p>És a dir, avisarem als desenvolupadors que vulguin fer servir la
nostra classe, que el mètode no està suportat, i en cas que tot i
així l’intentin fer servir, farem que en executar el seu codi se
n’adonin que anàvem seriosament.</p>
<p>Atenció: aquestes mesures tindran repercussions desagradables si la
nostra classe es fa servir en un context <em>polimòrfic</em>.</p>
<p class="rubric">Anotacions</p>
<table class="docutils footnote" frame="void" id="polimorfisme" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td>Estudiarem més endavant, el concepte de polimorfisme.
En poques paraules, és la possibilitat de fer servir una instància considerant-la d’un tipus
diferent del que és (per exemple, com la seva superclasse) Concretant l’exemple, si un mètode
espera un <code class="docutils literal notranslate"><span class="pre">Gat</span></code>, li podem passar un <code class="docutils literal notranslate"><span class="pre">GatRenat</span></code>.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="ornitorinc" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id2">[2]</a></td><td>Foto obtinguda de <a class="reference external" href="http://commons.wikimedia.org">Wikimedia commons</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="excepcions" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id3">[3]</a></td><td>Si encara no coneixes les excepcions, no t’amoïnis,
que arribaran aviat.</td></tr>
</tbody>
</table>
<hr class="docutils" />
<p><em>Ref. 20.1.5.6</em></p>
</div>
</div>
</div>


           </div>
           
          </div>

          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="herencia.ocultacio_redefinicio.html" class="btn btn-neutral" title="Ocultació i redefinició" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright Copyright 2018-2019 Moisès Gómez Girón.

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1819',
            LANGUAGE:'ca',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="_static/translations.js"></script>

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

     

  <!-- Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-41103782-2', 'auto');
  ga('send', 'pageview');

</script>
  <!-- End Google Analytics -->


  

</body>
</html>