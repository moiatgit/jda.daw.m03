###########################
El joc del penjat revisitat
###########################

Desenvolupa una nova versió del joc del penjat que vas realitzar a
:doc:`java.el_penjat`.

Aquesta nova versió obtindrà dels arguments de la funció ``main()`` el nom d'un
o més fitxers que contindran les paraules a endevinar.

En cas que algun dels fitxers no existeixi, no es pugui llegir o el seu
contingut no sigui correcte, el programa finalitzarà mostrant l'error.

El contingut d'un fitxer vàlid haurà de ser de text. Només podrà contenir
lletres, espais en blanc, salts de línia i comentaris.

Els comentaris seran línies que comencen pel símbol ``#``. Tota la línia serà
ignorada.

En cas que contingui altres caràcters que no siguin lletres, espais en blanc o
salts de lína fora d'una línia de comentari, es considerarà contingut no vàlid.

Les paraules que es consideraran seran totes les que apareguin en cada fitxer
d'entrada fora dels comentaris, no importa si estan separades per espais o per
salts de línia. No es guardarà una mateixa paraula més d'un cop.

Per facilitar la prova, afegirem una nova comanda al joc del penjat, a banda de
``"prou"`` i ``"glups"``. Serà ``"paraules"``.  En rebre ``"paraules"``, el
programa mostrarà la llista de paraules disponibles per a ser endevinades, una
per línia, en l'ordre en que van aparèixer als fitxers d'entrada, sense
repeticions i en majúscules.

A banda, desenvoluparem el programa de suport ``PoblaPenjat.java`` que demanarà
per entrada estàndard un nom de fitxer on guardarà les paraules que se li
indiquin.

En cas que existeixi un fitxer amb aquest nom, demanarà si es vol
sobreescriure o bé ampliar.

A continuació, anirà demanant paraules fins que s'introdueixi únicament la paraula
``"prou!"``. Fixa't en l'exclamació al final de la comanda. Això permetrà que la
paraula ``"prou"`` pugui formar part de les paraules a endevinar.

``PoblaPenjat`` no comprovarà si el que s'introdueix són o no paraules.
Simplement recollirà cadascuna de les línies les guardarà al fitxer
indicat. Si s'ha indicat ampliar, el fitxer resultant contindrà les paraules
anteriors més les noves.

En cas d'error accedint als fitxers, tant ``Penjat`` com ``PoblaPenjat``
finalitzaran l'execució.

Caldrà que afegeixis nous fitxers d'entrada/sortida per provar la nova versió de
``Penjat``.

Per millorar l'experiència dels nostres usuaris jugadors, farem ús de la
utilitat ``BooleanTableView`` tot mostrant el contingut d'un fitxer en el que es
descriurà cada figura del penjat. 
Els fitxers es diran ``penjat00.txt``, ``penjat01.txt``, etc.
Per exemple, el fitxer ``penjat10.txt``
correspondrà a la figura del penjat quan s'han exaurit totes les oportunitats
amb una paraula. Un possible contingut d'aquest fitxer podria ser:

.. code-block:: none

      ....................
      ....XXXXXXXXXXXXXX..
      ....XXXXXXXXXXXXXX..
      ........X.......XX..
      ........X.......XX..
      .......XXX......XX..
      .......XXX......XX..
      ........X.......XX..
      .......XXX......XX..
      ......X.X.X.....XX..
      .....X..X..X....XX..
      ........X.......XX..
      .......X.X......XX..
      ......X...X.....XX..
      .....X.....X....XX..
      ................XX..
      ................XX..
      ................XX..

Trobaràs tot un joc de figures del penjat al fitxer
:download:`figures_penjat.tar.gz <_recursos/figures_penjat.tar.gz>`.

Per descomptat, pots dissenyar-te les teves pròpies figures!

Considera la següent simulació:

.. code-block:: none

    $ ls *.penjat
    paraules01.penjat           paraules02.penjat
    $ cat paraules01.penjat
    ocurrent
    tromba
    $ cat paraules02.penjat
    sabata
    $ cat paraules.erronies
    # continguts erronis
    aquest fitxer
    inclou una paraula d0l3n+a
    i, per tant, ha de ser rebutjat
    $ java PoblaPenjat
    Camí al fitxer?
    paraules03.penjat
    Introdueix paraules (prou! per finalitzar)
    # darrera paraula
    ciceront
    prou!
    Fet
    $ ls *.penjat
    paraules01.penjat           paraules02.penjat           paraules03.penjat
    $ cat paraules03.txt
    # darrera paraula
    ciceront
    $ java PoblaPenjat
    Camí al fitxer?
    paraules01.penjat
    Ampliar o sobrescriure? (A o S)
    X
    Ampliar o sobrescriure? (A o S)
    S
    Introdueix paraules (prou! per finalitzar)
    # primeres paraules
    pissarra aixeta
    prou!
    Fet
    $ cat paraules01.penjat
    # primeres paraules
    pissarra aixeta
    $ java PoblaPenjat
    Camí al fitxer?
    paraules02.penjat
    Ampliar o sobrescriure? (A o S)
    A
    Introdueix paraules (prou! per finalitzar)
    # paraules en mig
    griflo
    prou!
    fet
    $ cat paraules02.penjat
    sabata
    # paraules en mig
    griflo
    $ java Penjat
    Cal indicar els fitxers amb les paraules
    $ java Penjat paraules01.penjat paraules.erronies paraules02.penjat
    El fitxer paraules.erronies conté paraules erronies
    $ java Penjat paraules01.penjat inexistent.penjat paraules02.penjat
    El fitxer inexistent.penjat no es troba
    $ java Penjat paraules01.penjat paraules02.penjat paraules03.penjat
    Comencem a jugar

    paraula: ********
    utilitzades: cap
    intents disponibles: 10
    Introdueix una lletra (prou: per sortir, glups per rendir-te)
    a
    paraula: ****A**A
    utilitzades: A
    intents disponibles: 10
    Introdueix una lletra (prou: per sortir, glups per rendir-te)
    paraules
    pissarra
    aixeta
    sabata
    griflo
    ciceront
    paraula: ****A**A
    utilitzades: A
    intents disponibles: 10
    Introdueix una lletra (prou: per sortir, glups per rendir-te)
    prou
    Espero que t'hagis divertit

Nota: fixa't que aquesta simulació acaba oferint les mateixes paraules que la
vesió anterior. Això et permetrà fer servir els mateixos jocs de prova que
ja tenies preparats.

----

*Ref. IP18.x*
