#################
Propietats finals
#################

La paraula clau final pot ser aplicada a diferents elements.

L'aplicació a classes té a veure amb el concepte d'herència que no es
tracta en aquest document.

L'aplicació a mètodes sovint està també relacionada amb l'herència. Un
altre ús és per l'eficiència: el compilador pot substituir les crides
al mètode final pel seu codi (*inline call*). Tot i que teòricament
Java sap quan ha de fer aquestes substitucions, es recomana només
indicar final per temes d'eficiència a mètodes molt breus o el codi
podria tornar-se massa gran. En aquestes primeres etapes
d'aprenentatge de la POO i de Java, no cal que ens preocupem d'aquest
tipus d'optimització.

L'aplicació a paràmetres permet indicar que el paràmetre no pot
canviar el seu valor dins del codi (paràmetres *read-only*) De la
mateixa manera, si indiquem que una variable és final, només li podrem
assignar valor un sol cop.

L'aplicació a propietats permet indicar que la propietat només pot
rebre un valor un cop en tota l'execució. És una mena de constant de
la instància. En cas que hi afegim ``static``, la constant és de la
classe.

També podem afegir *final* a una variable. El comportament és el
mateix que amb les propietats: el compilador només permet assignar un
cop a la variable.

Nota: en cas que la propietat o variable referenciï a una instància
mutable (que els valors de les seves propietats puguin ser
modificats), fer que la propietat/variable sigui final **no**
converteix la instància referenciada en immutable, només impedeix que
la referència canviï a una altra instància. Per exemple: 

.. code-block:: java
    :linenos:

    class A { int i; }
    class B { 
        final A a = new A(); 
        void canviaI(int v) {
            a.i = v;
        }
        void canviaA(A nova) {
            a = nova;   // error de compilació
                        // "error: cannot assign a value to final variable a"
        }
    } 

.. _propietats_finals_exercici:

Exercici 19. Propietats finals
==============================

Troba una manera d'aplicar el concepte de propietat final a la teva resposta de l'exercici
:ref:`anterior <propietats_de_classe_exercici>`.

Exercici 20. Què he aprés dels membres d'instància i de classe?
===============================================================

Fes un repàs dels continguts :doc:`d'aquest tema <membres_instancia_classe>`,
incloent els seus exercicis.  Indica exercici a exercici què has aprés de
nou en fer-lo, o bé quins són els conceptes que introdueix l'exercici, si ja els
coneixies anteriorment. Procura ser molt concret. Si et cal, ajuda't de (nous)
exemples.

En el cas que no hagis entès algun dels exercicis… bé, aquest cas no es pot
donar ja que, abans de fer aquest exercici t'ajudaràs de les diferents fonts de
suport que tens al teu abast (incloent, és clar, consultes al teu docent) per
arribar a entendre'l. És a dir, **no val** dir, que un exercici no l'has entès!
Entesos?

Redacta aquest exercici en un document de text pla. Et recomano que facis servir
algun format de text de marques com ara :doc:`reStructuredText <rst_intro>`
o `markdown
<https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet>`_.

