########################
Creem la màquina virtual
########################

La creació d'una màquina virtual amb Vagrant és molt senzilla.

A continuació farem servir una caixa (*box*) del `catàleg públic de Vagrant
<https://app.vagrantup.com/boxes/search>`_

Per exemple, escollirem un *Debian Stretch* bàsic per a poder
treballar-hi.

.. code-block:: none
    :emphasize-lines: 10,12

    $ vagrant box add debian/stretch64
    ==> box: Loading metadata for box 'debian/stretch64'
        box: URL: https://vagrantcloud.com/debian/stretch64
    This box can work with multiple providers! The providers that it
    can work with are listed below. Please review the list and choose
    the provider you will be working with.

    1) libvirt
    2) lxc
    3) virtualbox

    Enter your choice: 3
    ==> box: Adding box 'debian/stretch64' (v9.8.0) for provider: virtualbox
        box: Downloading: https://vagrantcloud.com/debian/boxes/stretch64/versions/9.8.0/providers/virtualbox.box
    …

Depenent del teu sistema, és possible que disposis de més mecanismes de
virtualització que *virtualbox*. En aquest cas, la instal·lació et
proposarà que defineixis quin vols fer anar. Escull *virtualbox*.

Aquesta comanda descarregarà la imatge de la màquina virtual. Pot durar
una mica, així que… paciència.

Ara crearem una carpeta on guardarem tota la informació del servidor amb
*PostGreSQL* que estem instal·lant, i inicialitzarem la imatge

.. code-block:: none

    $ mkdir ~/vmpostgres
    $ cd ~/vmpostgres
    $ vagrant init debian/stretch64

Que ens generarà:

.. code-block:: none

    A `Vagrantfile` has been placed in this directory. You are now
    ready to `vagrant up` your first virtual environment! Please read
    the comments in the Vagrantfile as well as documentation on
    `vagrantup.com` for more information on using Vagrant.

La comanda anterior, tal i com ens informa al seu missatge, ens ha creat
un fitxer anomenat ``Vagrantfile``. Aquest conté tota la informació de
configuració de la màquina virtual. Si bé aquest fitxer està expressat amb
sentències en llenguatge *Ruby*, no ens caldrà conèixer aquest per fer-la
anar.


