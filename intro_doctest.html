

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="ca" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="ca" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Coneixem els doctest &mdash; Introducció a la programació 2019-20 documentació</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
        <script src="_static/translations.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/moistyle.css" type="text/css" />
    <link rel="author" title="Quant a aquests documents" href="about.html" />
    <link rel="index" title="Índex" href="genindex.html" />
    <link rel="search" title="Cerca" href="search.html" />
    <link rel="next" title="Juguem amb condicionals" href="condicionals_juguem.html" />
    <link rel="prev" title="Niament múltiple" href="condicionals_niament.html" />
     
    <script class="googleanalytics" src="_static/moiscripts.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Introducció a la programació
          

          
            
            <img src="_static/logoprg.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                1920
              </div>
            
          

          

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="primeres_passes.html">Primeres passes</a></li>
<li class="toctree-l1"><a class="reference internal" href="instruccions.html">Instruccions</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="condicionals.html">Condicionals</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="condicionals_simple.html">L’alternativa simple</a></li>
<li class="toctree-l2"><a class="reference internal" href="condicionals_doble.html">L’alternativa doble</a></li>
<li class="toctree-l2"><a class="reference internal" href="condicionals_niament.html">Niament múltiple</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Coneixem els <em>doctest</em></a></li>
<li class="toctree-l2"><a class="reference internal" href="condicionals_juguem.html">Juguem amb condicionals</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="iteracions.html">Iteracions</a></li>
<li class="toctree-l1"><a class="reference internal" href="programacio_modular.html">Programació Modular</a></li>
<li class="toctree-l1"><a class="reference internal" href="python2java.html">De Python a Java</a></li>
<li class="toctree-l1"><a class="reference internal" href="fitxers.html">Fitxers</a></li>
<li class="toctree-l1"><a class="reference internal" href="estructures.html">Estructures</a></li>
<li class="toctree-l1"><a class="reference internal" href="poo.html">Programació Orientada a Objectes</a></li>
<li class="toctree-l1"><a class="reference internal" href="web.html">Aplicacions Web</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Introducció a la programació</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="condicionals.html">Condicionals</a> &raquo;</li>
        
      <li>Coneixem els <em>doctest</em></li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
    
           <div itemprop="articleBody">
            
  <div class="section" id="coneixem-els-doctest">
<h1>Coneixem els <em>doctest</em><a class="headerlink" href="#coneixem-els-doctest" title="Link permanent a aquest títol">¶</a></h1>
<p>Fins ara, en escriure els nostres programes hem definit una simulació de com han
de ser executats. Això ens ha permès prendre decisions com ara el nom del
programa i el text dels missatges a intercanviar amb els usuaris.</p>
<p>A banda, en alguns exercicis el docent ens ha <em>regalat</em> uns programes que de
manera més o menys màgica ens diuen si hem fet bé o no els nostres exercicis.</p>
<p>Hi hauria alguna manera d’aconseguir no dependre d’un programa extern per
comprovar que els nostres programes funcionen i, evidentment, sense que hàgim de
fer les proves manualment?</p>
<p>Considera novament el programa <code class="docutils literal notranslate"><span class="pre">saludausuari.py</span></code>:</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># Programa que demana a l&#39;usuari el seu nom i li saluda pel seu nom</span>
<span class="c1">#</span>
<span class="c1"># Exemple d&#39;execució:</span>
<span class="c1">#</span>
<span class="c1">#   $ python3 saludausuari.py</span>
<span class="c1">#   Com et dius?</span>
<span class="c1">#   Manel</span>
<span class="c1">#   Hola Manel. M&#39;encanta saber de tu</span>

<span class="c1"># Obtenció de l&#39;entrada</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Com et dius?&quot;</span><span class="p">)</span>
<span class="n">nom</span> <span class="o">=</span> <span class="nb">input</span><span class="p">()</span>

<span class="c1"># Composició del missatge</span>
<span class="n">missatge</span> <span class="o">=</span> <span class="s2">&quot;Hola &quot;</span> <span class="o">+</span> <span class="n">nom</span> <span class="o">+</span> <span class="s2">&quot;. M&#39;encanta saber de tu&quot;</span>

<span class="c1"># Mostra el resultat</span>
<span class="nb">print</span><span class="p">(</span><span class="n">missatge</span><span class="p">)</span>

</pre></div>
</td></tr></table></div>
<div class="section" id="una-nova-versio">
<h2>Una nova versió<a class="headerlink" href="#una-nova-versio" title="Link permanent a aquest títol">¶</a></h2>
<p>Considera la següent modificació del programa:</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># Programa que demana a l&#39;usuari el seu nom i li saluda pel seu nom</span>
<span class="c1">#</span>
<span class="c1"># Exemple d&#39;execució:</span>
<span class="c1">#</span>
<span class="c1">#   $ python3 saludausuari.py</span>
<span class="c1">#   Com et dius?</span>
<span class="c1">#   Manel</span>
<span class="c1">#   Hola Manel. M&#39;encanta saber de tu</span>

<span class="hll"><span class="k">def</span> <span class="nf">saluda_usuari</span><span class="p">(</span><span class="n">nom</span><span class="p">):</span>
</span><span class="hll">    <span class="sd">&quot;&quot;&quot; composa el missatge de salutació a partir del nom i el retorna.</span>
</span><span class="hll"><span class="sd">        &gt;&gt;&gt; saluda_usuari(&#39;Manel&#39;)</span>
</span><span class="hll"><span class="sd">        &quot;Hola Manel. M&#39;encanta saber de tu&quot;</span>
</span><span class="hll"><span class="sd">    &quot;&quot;&quot;</span>
</span><span class="hll">    <span class="n">resultat</span> <span class="o">=</span> <span class="s2">&quot;Hola &quot;</span> <span class="o">+</span> <span class="n">nom</span> <span class="o">+</span> <span class="s2">&quot;. M&#39;encanta saber de tu&quot;</span>
</span><span class="hll">    <span class="k">return</span> <span class="n">resultat</span>
</span>
<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="c1"># Obtenció de l&#39;entrada</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Com et dius?&quot;</span><span class="p">)</span>
    <span class="n">nom</span> <span class="o">=</span> <span class="nb">input</span><span class="p">()</span>

    <span class="c1"># Composició del missatge</span>
<span class="hll">    <span class="n">missatge</span> <span class="o">=</span> <span class="n">saluda_usuari</span><span class="p">(</span><span class="n">nom</span><span class="p">)</span>
</span>
    <span class="c1"># Mostra el resultat</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">missatge</span><span class="p">)</span>

</pre></div>
</td></tr></table></div>
<p>En aquesta nova versió del nostre saludador d’usuaris, tenim unes quantes modificacions importants:</p>
<ul>
<li><p>línia 24: en comptes de composar el missatge, assignem a <code class="docutils literal notranslate"><span class="pre">missatge</span></code>
l’expressió <code class="docutils literal notranslate"><span class="pre">saluda_usuari(nom)</span></code></p>
<p>Aquesta expressió és una <em>crida a una funció</em> anomenada <code class="docutils literal notranslate"><span class="pre">saluda_usuari()</span></code>
que estem definint a la línia 10.</p>
</li>
<li><p>línia 10: és la definició d’una funció</p>
<p>De moment, una <em>funció</em> és un codi al que li donem un nom i les dades que
necessita per realitzar el seu càlcul.</p>
<p>En aquest cas, hem escollit <code class="docutils literal notranslate"><span class="pre">saluda_usuari</span></code> com a nom de la funció, doncs és
el nom del programa.</p>
<p>La funció <code class="docutils literal notranslate"><span class="pre">saluda_usuari()</span></code> necessita la variable <code class="docutils literal notranslate"><span class="pre">nom</span></code> per composar el
missatge. Per aquesta raó <code class="docutils literal notranslate"><span class="pre">nom</span></code> apareix tant a la línia 10 com a la 24.</p>
</li>
<li><p>línia 16: aquest és el punt en que la funció <em>retorna</em> el resultat de la
composició. Ho podem entendre com que la funció <em>informa</em> al compilador que la
variable <code class="docutils literal notranslate"><span class="pre">resultat</span></code> conté el missatge resultant.</p></li>
<li><p>línies 11 a 14: es tracta d’un comentari que documenta la funció
<code class="docutils literal notranslate"><span class="pre">saluda_usuari()</span></code>.</p></li>
<li><p>línies 11 a 16: aquest és el <em>cos</em> de la funció. Per indicar que tot forma
part de la funció, fixat que totes les línies estan indentades.</p></li>
<li><p>línies 12 i 13: es tracta d’una simulació d’execució. En aquest cas el que
estem simulant, en comptes de ser una execució de tot el programa, ho és només
de la funció <code class="docutils literal notranslate"><span class="pre">saluda_usuari()</span></code></p>
<p>Fixa’t que a la línia 12 apareix el <em>prompt</em> de la consola de Python. Fixa’t
també que a la línia 13, el resultat apareix entre cometes, doncs és com
representa Python els strings.</p>
<p>A aquestes simulacions se les anomena <em>doctest</em> o <em>proves dins de comentari</em>.</p>
</li>
<li><p>línia 18: és una condició que indica a Python que només executi el que ve a
continuació només quan el programa és executat com a <code class="docutils literal notranslate"><span class="pre">python3</span>
<span class="pre">saludausuari.py</span></code>. De moment, creu-t’ho.</p></li>
<li><p>linies 19 a 21: obtenció del valor d’entrada. Fixa’t que és el mateix codi que
al programa original.</p></li>
<li><p>línia 24: en comptes de composar el missatge de sortida com a la línia 15 del
programa original, ara fem que la <em>funció</em> <code class="docutils literal notranslate"><span class="pre">saluda_usuari()</span></code> composi aquest
resultat per nosaltres.</p></li>
<li><p>la resta de línies corresponen a les del programa original, només que
indentades dins del condicional de la línia 18.</p></li>
</ul>
<p>Si tornem a executar <code class="docutils literal notranslate"><span class="pre">saludausuari.py</span></code> trobarem que fa el mateix que l’antiga
versió.</p>
</div>
<div class="section" id="comprovem-la-funcio-a-la-consola-de-python">
<h2>Comprovem la funció a la consola de Python<a class="headerlink" href="#comprovem-la-funcio-a-la-consola-de-python" title="Link permanent a aquest títol">¶</a></h2>
<p>Podem passar aquest codi a la consola de Python i fer la prova de la funció per nosaltres mateixos.
Per exemple, entra en la consola i escriu el següent:</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">saluda_nom</span><span class="p">(</span><span class="n">nom</span><span class="p">):</span>
<span class="gp">... </span>    <span class="sd">&quot;&quot;&quot; composa el missatge de salutació a partir del nom i el retorna.</span>
<span class="gp">... </span><span class="sd">    &gt;&gt;&gt; saluda_usuari(&#39;Manel&#39;)</span>
<span class="gp">... </span><span class="sd">    &quot;Hola Manel. M&#39;encanta saber de tu&quot;</span>
<span class="gp">... </span><span class="sd">    &quot;&quot;&quot;</span>
<span class="gp">... </span>    <span class="n">resultat</span> <span class="o">=</span> <span class="s2">&quot;Hola &quot;</span> <span class="o">+</span> <span class="n">nom</span> <span class="o">+</span> <span class="s2">&quot;. M&#39;encanta saber de tu&quot;</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">resultat</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">saluda_nom</span><span class="p">(</span><span class="s1">&#39;Manel&#39;</span><span class="p">)</span>
<span class="go">&quot;Hola Manel. M&#39;encanta saber de tu&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">help</span><span class="p">(</span><span class="n">saluda_nom</span><span class="p">)</span>
<span class="go">Help on function saluda_nom in module __main__:</span>

<span class="go">saluda_nom(nom)</span>
<span class="go">    composa el missatge de salutació a partir del nom i el retorna.</span>
<span class="go">(END)</span>
</pre></div>
</td></tr></table></div>
<p>A les línies entre la 2 i la 7, després dels puntets que t’afegeix la consola,
hauràs d’escriure uns espais inicials per indentar-les.</p>
<p>Per indicar a la consola de Python que ja has finalitzat la definició de la funció, caldrà que facis
un salt de línia en blanc (línia 8)</p>
<p>A la línia 9 estem <em>cridant</em> la funció, tot passant-li el nom de l’usuari a
saludar. La línia 7 ens la genera Python com a resultat de la crida. És el que
esperàvem, no?</p>
<p>Finalment, a la línia 14, i només com a curiositat de moment, podem veure que en
fa Python de la documentació de la nostra funció. Si li demanem que ens ofereixi
ajuda (<em>help</em>) sobre la funció, l’intèrpret ens mostra la documentació que li
hem proporcionat.</p>
</div>
<div class="section" id="comprovem-doctest-automaticament">
<h2>Comprovem <em>doctest</em> automàticament<a class="headerlink" href="#comprovem-doctest-automaticament" title="Link permanent a aquest títol">¶</a></h2>
<p>De moment no sembla que hàgim aconseguit millorar gaire, oi? De fet, el codi
resultant és molt més llarg que l’original.</p>
<p>Veiem si et puc convèncer de que val la pena el canvi.</p>
<p>Python ens ofereix una manera de comprovar que el test de la funció és correcte.</p>
<div class="highlight-none notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="hll">$ python3 -m doctest -v saludausuaridef.py
</span><span class="hll">Trying:
</span><span class="hll">    saluda_usuari(&#39;Manel&#39;)
</span><span class="hll">Expecting:
</span><span class="hll">    &quot;Hola Manel. M&#39;encanta saber de tu&quot;
</span><span class="hll">ok
</span>1 items had no tests:
    saludausuaridef
1 items passed all tests:
   1 tests in saludausuaridef.saluda_usuari
1 tests in 2 items.
1 passed and 0 failed.
<span class="hll">Test passed.
</span></pre></div>
</td></tr></table></div>
<p>Fixa’t que estem cridant el programa <code class="docutils literal notranslate"><span class="pre">python</span></code> amb arguments. En concret, <code class="docutils literal notranslate"><span class="pre">-m</span>
<span class="pre">doctest</span></code>. Aquest argument faran que Python comprovi els <em>doctest</em> que
contingui el programa. Per altra banda <code class="docutils literal notranslate"><span class="pre">-v</span></code> farà que Python ens ofereixi un
munt d’informació respecte les proves que realitzi.</p>
<p>T’ho tradueixo al català per la teva comoditat:</p>
<ul class="simple">
<li><p>Línies 2 a 5: Estic intentant executar la prova de cridar la funció <code class="docutils literal notranslate"><span class="pre">saluda_usuari('Manel')</span></code> i
espero que el seu resultat sigui <code class="docutils literal notranslate"><span class="pre">&quot;Hola</span> <span class="pre">Manel.</span> <span class="pre">M'encanta</span> <span class="pre">saber</span> <span class="pre">de</span> <span class="pre">tu&quot;</span></code>.</p></li>
<li><p>Línia 6: He trobat el que esperava.</p></li>
<li><p>Línia 13: S’han superat totes les proves</p></li>
</ul>
<p>És a dir, que tot ha anat bé!</p>
<p>Podem afegir més d’un <code class="docutils literal notranslate"><span class="pre">doctest</span></code> a una funció. Per exemple:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">saluda_usuari</span><span class="p">(</span><span class="n">nom</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; composa el missatge de salutació a partir del nom i el retorna.</span>
<span class="sd">        &gt;&gt;&gt; saluda_usuari(&#39;Manel&#39;)</span>
<span class="sd">        &quot;Hola Manel. M&#39;encanta saber de tu&quot;</span>
<span class="sd">        &gt;&gt;&gt; saluda_usuari(&#39;Anna&#39;)</span>
<span class="sd">        &quot;Hola Anna. M&#39;encanta saber de tu&quot;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">resultat</span> <span class="o">=</span> <span class="s2">&quot;Hola &quot;</span> <span class="o">+</span> <span class="n">nom</span> <span class="o">+</span> <span class="s2">&quot;. M&#39;encanta saber de tu&quot;</span>
    <span class="k">return</span> <span class="n">resultat</span>
</pre></div>
</div>
<p>En aquest cas, en executar-ho amb <code class="docutils literal notranslate"><span class="pre">-m</span> <span class="pre">doctest</span></code> ens informarà que han estat dues les proves que
s’han realitzat.</p>
<p>Ara bé un altre avantatge: per provar la nostra funció <strong>no cal</strong> que escrivim
el codi necessari per obtenir els valors dels usuaris. Ja sabem que som capaços
de fer <code class="docutils literal notranslate"><span class="pre">print()</span></code> i <code class="docutils literal notranslate"><span class="pre">input()</span></code> i el que ens preocupa és solucionar el problema
que tenim davant nostre.</p>
<p>Així, el nostre programa <code class="docutils literal notranslate"><span class="pre">saludausuari.py</span></code> es podria quedar de la següent
manera:</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># Funció que donat el nom d&#39;un usuari composa una salutació.</span>

<span class="k">def</span> <span class="nf">saluda_usuari</span><span class="p">(</span><span class="n">nom</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; composa el missatge de salutació a partir del nom i el retorna.</span>
<span class="sd">        &gt;&gt;&gt; saluda_usuari(&#39;Manel&#39;)</span>
<span class="sd">        &quot;Hola Manel. M&#39;encanta saber de tu&quot;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">resultat</span> <span class="o">=</span> <span class="s2">&quot;Hola &quot;</span> <span class="o">+</span> <span class="n">nom</span> <span class="o">+</span> <span class="s2">&quot;. M&#39;encanta saber de tu&quot;</span>
    <span class="k">return</span> <span class="n">resultat</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="en-resum">
<h2>En resum<a class="headerlink" href="#en-resum" title="Link permanent a aquest títol">¶</a></h2>
<p>Què hem fet?</p>
<ul class="simple">
<li><p>hem extret la part del codi del nostre programa que realitzava els càlculs i
l’hem substituïda per la crida a una funció</p></li>
<li><p>hem definit la funció amb el nom del nostre programa</p></li>
<li><p>hem posat, entre parèntesis, els valors (o arguments) necessaris perquè la
nostra funció pugui fer el que ha de fer</p></li>
<li><p>hem documentat la funció, tot explicant què fa, què retorna i de quin tipus
espera els seus arguments</p></li>
<li><p>hem afegit uns comentaris especials, anomenats <code class="docutils literal notranslate"><span class="pre">doctest</span></code> que simulen
l’execució de la funció a la consola de Python</p></li>
<li><p>hem afegit el codi antic dins del bloc de la funció (indentat)</p></li>
<li><p>hem finalitzat amb <code class="docutils literal notranslate"><span class="pre">return</span></code> a la nostra funció per indicar quin és el
resultat de cridar-la.</p></li>
<li><p>hem comprovat l’execució de la funció a la consola de Python</p></li>
<li><p>hem substituït el codi original per una crida a la funció, tot passant-li els
valors que requereix per fer el càlcul, amb el tipus adequat</p></li>
<li><p>hem ficat el codi original (amb la crida a la nova funció) dins d’un bloc d’un
condicional especial.</p></li>
<li><p>hem provat que el codi canviat continua passant les proves que ja teníem</p></li>
<li><p>hem fet que Python comprovi automàticament la simulació de l’execució de la
funció, amb els arguments <code class="docutils literal notranslate"><span class="pre">-m</span> <span class="pre">doctest</span> <span class="pre">-v</span></code></p></li>
</ul>
<p>Hem fet moltes coses, oi? Ens caldrà una mica d’entrenament per tal de pair-les.</p>
</div>
<div class="section" id="practiquem">
<h2>Practiquem<a class="headerlink" href="#practiquem" title="Link permanent a aquest títol">¶</a></h2>
<p>Les següents pràctiques et permetran entendre una mica millor la
transformació que hem fet aquí.  Caldrà que tornis a revisar el codi de
vàries pràctiques anteriors.</p>
<p>Com que en alguns exercicis treballarem sobre el codi ja desenvolupat
d’exercicis previs, et recomano que facis una còpia de tot el contingut.</p>
<p>Et recordo la comanda:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ cp -vr carpeta_inicial carpeta_final
</pre></div>
</div>
<p>Fixa’t l’argument <code class="docutils literal notranslate"><span class="pre">-r</span></code> que permet copiar també el contingut de
subcarpetes (com ara <code class="docutils literal notranslate"><span class="pre">test/</span></code>)</p>
<p>Fixa’t també que mantindrem els fitxers de prova que ja teníem. Això ens
permetrà comprovar que no hem trencat res amb els canvis.</p>
</div>
<div class="section" id="exercici-7-el-quadrat-d-un-numero-reloaded">
<h2>Exercici 7. El quadrat d’un número (reloaded)<a class="headerlink" href="#exercici-7-el-quadrat-d-un-numero-reloaded" title="Link permanent a aquest títol">¶</a></h2>
<p>Recordes l’exercici <a class="reference internal" href="instruccions_comprovacio.html#exercici-quadratnum"><span class="std std-ref">Exercici 7. ☞ El quadrat d’un número</span></a>? Doncs toca fer una nova
versió.</p>
<p>Crea la carpeta <code class="docutils literal notranslate"><span class="pre">02_07_quadratnumero/</span></code> i còpia-hi el contingut de
<code class="docutils literal notranslate"><span class="pre">01_07_quadratnumero/</span></code>. Per exemple:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ cp -vr 01_07_quadratnumero 02_07_quadratnumero
</pre></div>
</div>
<p>Ara, edita <code class="docutils literal notranslate"><span class="pre">02_07_quadratnumero/quadratnum.py</span></code> i modifica’l segons els canvis
vistos en aquesta secció.</p>
<p>Segueix, a mode de recordatori, les següents instruccions:</p>
<ol class="arabic">
<li><p>Defineix la funció que tindrà el codi que calcula i composa el missatge a
partir de l’entrada.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">quadrat_num</span><span class="p">(</span><span class="n">num</span><span class="p">):</span>
</pre></div>
</div>
</li>
<li><p>Documenta la funció (què fa?)</p>
<p>Recorda, fes servir <code class="docutils literal notranslate"><span class="pre">&quot;&quot;&quot;</span></code> a partir de la següent línia de la definició del
nom de la funció.</p>
</li>
<li><p>Simula una execució com a <code class="docutils literal notranslate"><span class="pre">doctest</span></code></p>
<p>Per la simulació pots fer servir la prova que es fa a la simulació del
programa sencer:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">quadrat_num</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="go">&#39;El quadrat de 4 és 16&#39;</span>
</pre></div>
</div>
<p>Fixa’t que la simulació rep un <code class="docutils literal notranslate"><span class="pre">4</span></code> i no un <code class="docutils literal notranslate"><span class="pre">'4'</span></code>!</p>
</li>
<li><p>Posa dins del bloc de la funció el codi que en la versió anterior calculava
el quadrat del número feia la composició del missatge.</p>
<p>En comptes d’escriure el resultat amb <code class="docutils literal notranslate"><span class="pre">print()</span></code>, guarda’l a una variable
anomenada, per exemple, <code class="docutils literal notranslate"><span class="pre">resultat</span></code>.</p>
</li>
<li><p>Retorna el resultat composat (amb <code class="docutils literal notranslate"><span class="pre">return</span></code>)</p></li>
<li><p>Modifica la part antiga que composava el missatge, de manera que ara cridi la
funció que acabes de definir.</p>
<p>Atenció: la funció <code class="docutils literal notranslate"><span class="pre">quadrat_num()</span></code> espera un número, així que hauràs de
convertir el valor que hagis recollit de <code class="docutils literal notranslate"><span class="pre">input()</span></code> abans de passar-li.</p>
<p>No oblidis ficar-ho tot dins de la condició <code class="docutils literal notranslate"><span class="pre">__name__</span> <span class="pre">==</span> <span class="pre">'__main__'</span></code>.</p>
</li>
<li><p>Passa les proves antigues (<code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">bash</span> <span class="pre">test/test.sh</span></code>)</p></li>
<li><p>Passa les proves de <code class="docutils literal notranslate"><span class="pre">doctest</span></code>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ python3 -m doctest -v quadratnum.py
</pre></div>
</div>
</li>
</ol>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Assegura’t que aconsegueixes que funcioni aquest exercici i
entendre bé el que has fet, abans de passar al següent.</p>
</div>
</div>
<div class="section" id="exercici-8-la-meitat-d-un-numero-re-loaded">
<h2>Exercici 8. La meitat d’un número (re-loaded)<a class="headerlink" href="#exercici-8-la-meitat-d-un-numero-re-loaded" title="Link permanent a aquest títol">¶</a></h2>
<p>Copia l’exercici <a class="reference internal" href="instruccions_comprovacio.html#exercici-meitatnum"><span class="std std-ref">Exercici 8. ☞ La meitat d’un número</span></a> a <code class="docutils literal notranslate"><span class="pre">02_08_meitatnum/</span></code> i, dins del
fitxer <code class="docutils literal notranslate"><span class="pre">meitatnum.py</span></code> realitza les transformacions que hem vist en aquesta
secció.</p>
<p>Pots fer servir els següents <em>doctest</em>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">meitat_num</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="go">&#39;La meitat de 4 és 2.0&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">meitat_num</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="go">&#39;La meitat de 5 és 2.5&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="exercici-9-l-edat-aproximada-de-l-usuari-re-loaded">
<h2>Exercici 9. L’edat aproximada de l’usuari (re-loaded)<a class="headerlink" href="#exercici-9-l-edat-aproximada-de-l-usuari-re-loaded" title="Link permanent a aquest títol">¶</a></h2>
<p>Copia l’exercici <a class="reference internal" href="instruccions_comprovacio.html#exercici-edataproximada"><span class="std std-ref">Exercici 9. ☞ L’edat aproximada</span></a> a <code class="docutils literal notranslate"><span class="pre">02_09_edataproximada/</span></code> i
realitza l’extracció del codi dins la funció <code class="docutils literal notranslate"><span class="pre">edat_aproximada()</span></code> tal i com hem
vist en aquesta secció.</p>
<p>Construeix-te el <em>doctest</em> a partir de la simulació del programa original.</p>
</div>
<div class="section" id="exercici-10-una-calculadora-basica-re-loaded">
<h2>Exercici 10. Una calculadora bàsica (re-loaded)<a class="headerlink" href="#exercici-10-una-calculadora-basica-re-loaded" title="Link permanent a aquest títol">¶</a></h2>
<p>Copia l’exercici <a class="reference internal" href="instruccions_comprovacio.html#exercici-calculadorabasica-python"><span class="std std-ref">Exercici 10. ☞ Una calculadora bàsica</span></a> a
<code class="docutils literal notranslate"><span class="pre">02_10_calculadorabasica/</span></code> i extreu el codi del càlcul i composició de la
sortida a la funció <code class="docutils literal notranslate"><span class="pre">calculadora_basica()</span></code>.</p>
<p>En aquesta ocasió has de tenir en comptes que:</p>
<ul>
<li><p>la funció ha de rebre dos números que hauràs de separar amb comes</p></li>
<li><p>el text a retornar molt probablement correspon al que abans escrivies amb més
d’un <code class="docutils literal notranslate"><span class="pre">print()</span></code>.</p>
<p>Com que ara has de retornar un sol valor, et toca modificar lleugerament el
codi antic de manera que els quatre resultats apareguin concatenats en una
sola variable de text.</p>
<p>Una pista:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">text</span> <span class="o">=</span> <span class="s1">&#39;hola&#39;</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="s1">&#39;adéu&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">text</span>
<span class="go">&#39;hola\nadéu&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
<span class="go">hola</span>
<span class="go">adéu</span>
</pre></div>
</div>
<p>Així, el <em>doctest</em> serà:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">calculadora_basica</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="go">&#39;6 + 2 = 8\n6 - 2 = 4\n6 * 2 = 12\n6 / 2 = 3.0\n&#39;</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="exercici-11-si-ets-adult-llavors-ets-responsable-re-loaded">
<h2>Exercici 11. Si ets adult llavors ets responsable (re-loaded)<a class="headerlink" href="#exercici-11-si-ets-adult-llavors-ets-responsable-re-loaded" title="Link permanent a aquest títol">¶</a></h2>
<p>En aquesta ocasió convertirem un exercici amb condicionals. Cap problema.</p>
<p>Copia l’exercici <a class="reference internal" href="condicionals_simple.html#exercici-preso"><span class="std std-ref">Exercici 2. ☞ Si ets adult llavors ets responsable</span></a> a <code class="docutils literal notranslate"><span class="pre">02_11_preso/</span></code> i realitza els canvis
d’extracció que estem treballant.</p>
<p>Afegeix, com a mínim, <strong>tres</strong> <em>doctest</em>: els dos de la simulació i un tercer
amb el valor <code class="docutils literal notranslate"><span class="pre">18</span></code>.</p>
</div>
<div class="section" id="exercici-12-dos-en-ordre-re-loaded">
<h2>Exercici 12. Dos en ordre (re-loaded)<a class="headerlink" href="#exercici-12-dos-en-ordre-re-loaded" title="Link permanent a aquest títol">¶</a></h2>
<p>Converteix l’exercici <a class="reference internal" href="condicionals_doble.html#exercici-dosenordre"><span class="std std-ref">Exercici 3. ☞ Dos en ordre</span></a> dins <code class="docutils literal notranslate"><span class="pre">02_12_dosenordre/</span></code>.</p>
<p>Assegura’t que el doctest inclou les dues possibilitats: que el primer sigui
menor que el segon i que el segon sigui menor que el primer.</p>
</div>
<div class="section" id="exercici-13-mesos-i-anys-re-loaded">
<h2>Exercici 13. Mesos i anys (re-loaded)<a class="headerlink" href="#exercici-13-mesos-i-anys-re-loaded" title="Link permanent a aquest títol">¶</a></h2>
<p>Converteix l’exercici <a class="reference internal" href="condicionals_niament.html#exercici-mesosianys"><span class="std std-ref">Exercici 5. ☞ Mesos i anys</span></a> dins <code class="docutils literal notranslate"><span class="pre">02_13_mesosianys/</span></code>.</p>
<p>Assegura’t que els <em>doctest</em> inclouen els casos de gener, decembre i un altre.</p>
</div>
<div class="section" id="exercici-14-tres-en-ordre-re-loaded">
<h2>Exercici 14. Tres en ordre (re-loaded)<a class="headerlink" href="#exercici-14-tres-en-ordre-re-loaded" title="Link permanent a aquest títol">¶</a></h2>
<p>Converteix l’exercici <a class="reference internal" href="condicionals_niament.html#exercici-tresenordre"><span class="std std-ref">Exercici 6. ☞ Tres en ordre</span></a> dins <code class="docutils literal notranslate"><span class="pre">02_14_tresenordre/</span></code>.</p>
<p>Assegura’t que inclous <strong>sis</strong> <em>doctest</em> amb totes les possibiltats.</p>
</div>
</div>


           </div>
           
          </div>
    <div class="googleanalytics">
    <div id="cookiesbox">
        Aquest lloc web utilitza galetes (<i>cookies</i>) per a analitzar el seu ús
        amb les eines que ofereix <a href="https://www.google.com/analytics">Google Analytics</a>.
        En continuar navegant-hi, estàs acceptant-ho.
        <br/>
        <a class="btn btn-neutral" onclick="setUserAcceptsCookies();">
            Tancar
            <span class="fa fa-window-close"></span>
        </a>
    </div>
    <script>setCookiesboxVisibility();</script>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-41103782-2', 'auto');
      ga('send', 'pageview');
    </script>
</div>


          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="condicionals_juguem.html" class="btn btn-neutral float-right" title="Juguem amb condicionals" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="condicionals_niament.html" class="btn btn-neutral float-left" title="Niament múltiple" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019-2020 Moisès Gómez Girón

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>