

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="ca" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="ca" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Agregació &mdash; Introducció a la programació 1819 documentació</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/moistyle.css" type="text/css" />
    <link rel="author" title="Quant a aquests documents" href="about.html" />
    <link rel="index" title="Índex" href="genindex.html" />
    <link rel="search" title="Cerca" href="search.html" />
    <link rel="next" title="Composició" href="relacions.composicio.html" />
    <link rel="prev" title="Relacions entre classes" href="relacions.html" />
     
    <script src="_static/moiscripts.js"></script>


  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Introducció a la programació
          

          
            
            <img src="_static/logoprg.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                1819
              </div>
            
          

          

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="primeres_passes.html">Primeres passes</a></li>
<li class="toctree-l1"><a class="reference internal" href="dades.html">Dades</a></li>
<li class="toctree-l1"><a class="reference internal" href="operadors_i_expressions.html">Operadors i expressions</a></li>
<li class="toctree-l1"><a class="reference internal" href="instruccions.html">Instruccions seqüencials</a></li>
<li class="toctree-l1"><a class="reference internal" href="condicionals.html">Condicionals</a></li>
<li class="toctree-l1"><a class="reference internal" href="iteracions.html">Iteracions</a></li>
<li class="toctree-l1"><a class="reference internal" href="strings.html">Strings</a></li>
<li class="toctree-l1"><a class="reference internal" href="programacio_modular.html">Programació Modular</a></li>
<li class="toctree-l1"><a class="reference internal" href="bucles_condicionals.html">Bucles condicionals</a></li>
<li class="toctree-l1"><a class="reference internal" href="sequencies.html">Seqüències</a></li>
<li class="toctree-l1"><a class="reference internal" href="python2java.html">De Python a Java</a></li>
<li class="toctree-l1"><a class="reference internal" href="fitxers.html">Fitxers</a></li>
<li class="toctree-l1"><a class="reference internal" href="estructures.html">Estructures</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="poo.html">Programació Orientada a Objectes</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="classes_i_objectes.html">Classes i objectes</a></li>
<li class="toctree-l2"><a class="reference internal" href="constructors_i.html">Constructors</a></li>
<li class="toctree-l2"><a class="reference internal" href="membres_instancia_classe.html">Membres d’instància i de classe</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="relacions.html">Relacions entre classes</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Agregació</a></li>
<li class="toctree-l3"><a class="reference internal" href="relacions.composicio.html">Composició</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="herencia.html">Herència</a></li>
<li class="toctree-l2"><a class="reference internal" href="polimorfisme.html">Polimorfisme</a></li>
<li class="toctree-l2"><a class="reference internal" href="abstractes.html">Classes abstractes</a></li>
<li class="toctree-l2"><a class="reference internal" href="interfaces.html">Interfaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="poo.eleccio.html">Classes, subclasses, classes abstractes, <em>interfaces</em>?</a></li>
<li class="toctree-l2"><a class="reference internal" href="excepcions.html">Excepcions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contenidors.html">Agrupacions d’objectes</a></li>
<li class="toctree-l1"><a class="reference internal" href="bd.html">Persistència amb bases de dades</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Introducció a la programació</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="poo.html">Programació Orientada a Objectes</a> &raquo;</li>
        
          <li><a href="relacions.html">Relacions entre classes</a> &raquo;</li>
        
      <li>Agregació</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
    <div>
    <div id="cookiesbox">
        Aquest lloc web utilitza galetes (<i>cookies</i>) per a analitzar el seu ús
        amb les eines que ofereix <a href="https://www.google.com/analytics">Google Analytics</a>.
        En continuar navegant-hi, estàs acceptant-ho.
        <br/>
        <a class="btn btn-neutral" onclick="setUserAcceptsCookies();">
            Tancar
            <span class="fa fa-window-close"></span>
        </a>
    </div>

    <script>setCookiesboxVisibility();</script>

</div>
    
           <div itemprop="articleBody">
            
  <div class="section" id="agregacio">
<h1>Agregació<a class="headerlink" href="#agregacio" title="Link permanent a aquest títol">¶</a></h1>
<p>Definició: Quan una classe A usa els serveis (membres públics) d’una
altra B, es diu que hi ha una <em>dependència</em> entre la classe A i la B.
Quan B pateix algun canvi en la seva interfície, A podria requerir ser
modificat.</p>
<p>Definició: Es diu que una classe A <em>agrega</em> una classe B quan té una
dependència de B, de manera que l’existència de B és independent de la
de A. És a dir la instància de B pot ser creada abans que la de A i
«sobreviure» després de A. Es diu que A usa (uses-a) B</p>
<p>Aquesta relació de dependència es coneix com a <strong>agregació</strong>. En Java,
s’implementa normalment amb una propietat de l’objecte agregat. En cas
d’haver de duplicar una instància de la classe A, les dues instàncies
farien referència a la mateixa instància de la classe B.</p>
<div class="section" id="exercici-1-el-picarol">
<span id="relacions-exercicis-picarol"></span><h2>Exercici 1. El Picarol<a class="headerlink" href="#exercici-1-el-picarol" title="Link permanent a aquest títol">¶</a></h2>
<p>En aquest exercici desenvoluparem una nova versió del nostre estimat Gat Renat. En aquesta ocasió,
el Renat acceptarà que li pengem un picarol.</p>
<p>Quan el Renat té un picarol penjat, cada cop que es mou (s’aixeca, seu o s’estira), fa sonar el
picarol. Atenció: no es considera que es mou quan es construeix la instància ni quan es fa servir un
mètode <code class="docutils literal notranslate"><span class="pre">setEstat()</span></code>.</p>
<p>Es demana:</p>
<ul class="simple">
<li>implementa la classe Picarol amb el mètode <em>sona()</em>.</li>
<li>amplia la classe del gat Renat tal i com va quedar a l’exercici de <a class="reference internal" href="constructors_i.html#constructors-i-exercici-entorn-operatiu"><span class="std std-ref">l’entorn operatiu</span></a> amb els següents mètodes:<ul>
<li><code class="docutils literal notranslate"><span class="pre">boolean</span> <span class="pre">tePicarol()</span></code>: cert si té un picarol assignat. Inicialment no en té.</li>
<li><code class="docutils literal notranslate"><span class="pre">Picarol</span> <span class="pre">posaPicarol(Picarol)</span></code>: assigna un picarol. Si en tenia un, el substitueix pel nou i retorna
l’anterior. Si no en tenia cap, retorna null.</li>
<li><code class="docutils literal notranslate"><span class="pre">Picarol</span> <span class="pre">treuPicarol()</span></code>: retorna el picarol i a partir d’aquest moment deixa de tenir picarol.
Si no en tenia cap, retorna null.</li>
</ul>
</li>
<li>crea una nova versió de l’entorn operatiu del gat Renat, que ofereixi les noves comandes:<ul>
<li>«posa’t picarol»: Si no tenia picarol, respondrà «fet», altrament dirà «ja tinc picarol».</li>
<li>«treu-te picarol»:  Si tenia picarol, respondrà «fet», altrament dirà «no en tinc cap de picarol».</li>
<li>«tens picarol?»: Contesta «sí» o «no» segons correspongui.</li>
</ul>
</li>
</ul>
<p>Considera la classe Picarol que ofereix els següents serveis:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">sona()</span></code> que de moment, simplement escriu per sortida estàndard el missatge «clink-clink».</li>
<li><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">quantsCopsHaSonat()</span></code> que retorna el nombre de cops que s’ha cridat al mètode <code class="docutils literal notranslate"><span class="pre">sona()</span></code>
d’aquest picarol.</li>
</ul>
<p>Crea un joc de proves que mostri el funcionament d’aquestes noves funcionalitats.</p>
<div class="admonition tip">
<p class="first admonition-title">Pista</p>
<p>Sabem que normalment no és una bona idea escriure per sortida estàndard des dels mètodes
de les nostres classes. En aquest cas farem una excepció doncs ens simplifica molt l’exercici.</p>
<p>Espera un moment. Estàs pensant que seria més xulo fer sonar el picarol de debò? Doncs no et quedis
amb les ganes! Considera el següent codi:</p>
<div class="highlight-java notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></div></td><td class="code"><div class="highlight"><pre><span></span> <span class="kn">import</span> <span class="nn">javax.sound.sampled.Clip</span><span class="o">;</span>
 <span class="kn">import</span> <span class="nn">javax.sound.sampled.AudioSystem</span><span class="o">;</span>
 <span class="kn">import</span> <span class="nn">javax.sound.sampled.AudioInputStream</span><span class="o">;</span>
 <span class="kd">public</span> <span class="kd">class</span> <span class="nc">DemoPicarol</span> <span class="o">{</span>
     <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">sona</span><span class="o">()</span> <span class="o">{</span>
         <span class="n">String</span> <span class="n">url</span> <span class="o">=</span> <span class="s">&quot;picarol.wav&quot;</span><span class="o">;</span>
<span class="hll">         <span class="n">Class</span> <span class="n">thisClass</span> <span class="o">=</span> <span class="n">DemoPicarol</span><span class="o">.</span><span class="na">class</span><span class="o">;</span>
</span>         <span class="k">try</span> <span class="o">{</span>
             <span class="n">Clip</span> <span class="n">clip</span> <span class="o">=</span> <span class="n">AudioSystem</span><span class="o">.</span><span class="na">getClip</span><span class="o">();</span>
             <span class="n">AudioInputStream</span> <span class="n">inputStream</span> <span class="o">=</span> <span class="n">AudioSystem</span><span class="o">.</span><span class="na">getAudioInputStream</span><span class="o">(</span>
                     <span class="n">thisClass</span><span class="o">.</span><span class="na">getResourceAsStream</span><span class="o">(</span><span class="n">url</span><span class="o">));</span>
             <span class="n">clip</span><span class="o">.</span><span class="na">open</span><span class="o">(</span><span class="n">inputStream</span><span class="o">);</span>
             <span class="n">clip</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
             <span class="n">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">1000</span><span class="o">);</span>
         <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
             <span class="n">System</span><span class="o">.</span><span class="na">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;No puc fer sonar!&quot;</span><span class="o">);</span>
         <span class="o">}</span>
     <span class="o">}</span>
     <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
         <span class="n">sona</span><span class="o">();</span>
     <span class="o">}</span>
 <span class="o">}</span>
</pre></div>
</td></tr></table></div>
<p>Descarregat el fitxer <a class="reference download internal" href="_downloads/picarol.wav" download=""><code class="xref download docutils literal notranslate"><span class="pre">picarol.wav</span></code></a> i col·loca’l a la carpeta on
tinguis la demostració del Picarol. Compila la demo, executa-la i assegura’t que els altaveus (o
auriculars) estan en funcionament.</p>
<p class="last">Adapta aquest codi a la teva resposta a aquest exercici i gaudeix de fer sonar el teu picarol.
No et capfiquis gaire amb com funciona. Hi ha alguns elements que no hem vist encara. Amb tot, el
codi el pots fer servir pràcticament directament. Únicament assegura’t que a la línia 7 canvies
<code class="docutils literal notranslate"><span class="pre">DemoPicarol</span></code> pel nom de la classe on posis aquest codi.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p>Aquest exercici disposa d’un test de prova que pots descarregar-te <a class="reference download internal" href="_downloads/E005001TestSuite.tar.gz" download=""><code class="xref download docutils literal notranslate"><span class="pre">d'aquí</span></code></a>.</p>
<p>Donat que els tests comencen a fer-se més grans, en aquest cas trobes un fitxer comprimit amb
quatre fitxers .java. El que has d’executar és <code class="docutils literal notranslate"><span class="pre">E005001TestSuite.java</span></code>.</p>
<p>Guarda el fitxer a la carpeta on hi col·locaràs el teu codi i desempaqueta’l amb la comanda:</p>
<div class="last highlight-sh notranslate"><div class="highlight"><pre><span></span>$ tar xzvf E005001TestSuite.tar.gz
</pre></div>
</div>
</div>
<hr class="docutils" />
<p><em>Ref. 20.1.4.1</em></p>
</div>
</div>


           </div>
           
          </div>

          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="relacions.composicio.html" class="btn btn-neutral float-right" title="Composició" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="relacions.html" class="btn btn-neutral" title="Relacions entre classes" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright Copyright 2018-2019 Moisès Gómez Girón.

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1819',
            LANGUAGE:'ca',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="_static/translations.js"></script>

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

     

  <!-- Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-41103782-2', 'auto');
  ga('send', 'pageview');

</script>
  <!-- End Google Analytics -->


  

</body>
</html>